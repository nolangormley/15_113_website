<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio - Contact</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="site-nav"></div>
    <script>
    (function(){
        var candidates = ['navbar.html','./navbar.html','/navbar.html'];
        var container = document.getElementById('site-nav');
        if(!container){ console.warn('No #site-nav element found'); }

        function tryNext(i){
            if(i >= candidates.length){ console.error('All attempts to load navbar.html failed'); return; }
            fetch(candidates[i])
                .then(function(res){ if(!res.ok) throw new Error('Status ' + res.status); return res.text(); })
                .then(function(html){ container.innerHTML = html; setActiveLink(); })
                .catch(function(){ tryNext(i+1); });
        }

        function setActiveLink(){
            var path = window.location.pathname.split('/').pop();
            if(!path) path = 'index.html';
            var links = container.querySelectorAll('a.nav-link');
            links.forEach(function(a){
                a.classList.remove('active');
                var href = a.getAttribute('href'); if(!href) return;
                var hrefName = href.split('/').pop();
                if(hrefName === path) a.classList.add('active');
            });
        }

        tryNext(0);
    })();
    </script>

    <main class="container py-5">
        <h1 class="text-center mb-5">Get In Touch</h1>
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card shadow-sm p-4">
                    <!-- Form submits to FormSubmit (static, no backend). You will need to
                         verify the destination email at formsubmit.co after first submit. -->
                    <form id="contact-form" action="https://formsubmit.co/nolangormley%40gmail.com" method="post" accept-charset="UTF-8">
                        <!-- Honeypot to reduce spam (should be hidden) -->
                        <input type="text" name="_honey" style="display:none">
                        <!-- Disable FormSubmit's captcha (optional) -->
                        <input type="hidden" name="_captcha" value="false">
                        <!-- No redirect: AJAX will show inline success message -->
                        <!-- Email subject shown in your inbox -->
                        <input type="hidden" name="_subject" value="New message from MyPortfolio contact form">

                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="Your Name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" name="message" rows="5" placeholder="Your message..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Send Message</button>
                    </form>
                    <div id="form-alert" class="mt-3" aria-live="polite"></div>

                    <script>
                    (function(){
                        var form = document.getElementById('contact-form');
                        if(!form) return;
                        var submitBtn = form.querySelector('button[type="submit"]');
                        var alertBox = document.getElementById('form-alert');

                        function showMessage(html, type){
                            alertBox.innerHTML = '<div class="alert alert-' + (type||'info') + '" role="alert">' + html + '</div>';
                        }

                        form.addEventListener('submit', function(e){
                            e.preventDefault();
                            // basic client-side validity check
                            if(!form.checkValidity()){
                                form.reportValidity();
                                return;
                            }

                            var data = new FormData(form);
                            submitBtn.disabled = true;
                            var prevText = submitBtn.innerHTML;
                            submitBtn.innerHTML = 'Sending...';

                            fetch(form.action, {
                                method: 'POST',
                                body: data,
                                headers: { 'Accept': 'application/json' }
                            }).then(function(response){
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = prevText;

                                var contentType = response.headers.get('content-type') || '';

                                if(response.ok){
                                    // Success: show inline success message (handle JSON or text)
                                    showMessage('Thanks â€” your message was sent. I\'ll get back to you soon.', 'success');
                                    try{ form.reset(); }catch(e){}
                                    return;
                                }

                                // Non-OK response: try to extract useful message
                                if(contentType.indexOf('application/json') !== -1){
                                    return response.json().then(function(err){
                                        var msg = (err && (err.message || err.error)) ? (err.message || err.error) : 'Submission failed';
                                        showMessage(msg, 'danger');
                                    }).catch(function(){
                                        showMessage('Submission failed. Please try again later.', 'danger');
                                    });
                                }

                                // Fallback: read text body
                                return response.text().then(function(text){
                                    var short = text && text.length > 200 ? text.slice(0,200) + '...' : text;
                                    showMessage('Submission failed: ' + (short || 'Unknown error'), 'danger');
                                    console.error('Form submit response (non-JSON):', text);
                                }).catch(function(){
                                    showMessage('Submission failed. Please try again later.', 'danger');
                                });
                            }).catch(function(err){
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = prevText;
                                showMessage('Network error. Please try again later.', 'danger');
                                console.error('Form submit error:', err);
                            });
                        });
                    })();
                    </script>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 My Portfolio. Made in collaboration with Gemini AI. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>